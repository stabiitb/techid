<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Events @ IIT Bombay">
    <meta name="author" content="">

    <title>Events | IIT Bombay</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700' rel='stylesheet' type='text/css'>
    <link href="/static/bootstrap/css/stylesheet.css" rel="stylesheet">
    <script src="/static/jquery.js"></script>
    <script src="/static/bootstrap/js/bootstrap.js"></script>
    <script src="/static/jquery.validate.js"></script>
    <script type="text/javascript" src="/static/moment.js"></script>
    <script type="text/javascript" src="/static/bootstrap-datetimepicker/src/js/bootstrap-datetimepicker.js"></script>

  </head>

  <body>
    <nav class="navbar navbar-fixed-top navbar-inverse" id="nav" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./">Events</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#about">About</a></li>
            <li><a href="./events">Competitions</a></li>
            <li><a href="./contact.html">Contact</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>
    <br/>
    <div class="row">
      <div class="container">
        <div class="col-lg-10 col-lg-offset-1">
          <div class="row">
            <div class="col-lg-12">
               <img class="img-responsive" src="http://placehold.it/1024X300">
            </div>
            <div class="col-lg-12">
              <div class="page-header">
                <h3>{{ event.name }} &nbsp;<span class="badge">Event Type</span>
                {% if type == "team" %}
                   <button type="button" class="btn btn-success pull-right" data-toggle="modal" data-target="#myModal">Register<span class="glyphicon glyphicon-chevron-right"></span></button> 
                {% elif type == "competition" %}
                 <form method="post" action="/event/register" name="type" value="competition"><button type="submit" name="eventid" value="{{ event.id }}" class="btn btn-success pull-right">Register <span class="glyphicon glyphicon-chevron-right"></span></button> </form>
                 {% endif %}
               </h3> 
              </div>
                  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                          <h4 class="modal-title" id="myModalLabel">Registration Status</h4>
                        </div>
                        <div class="modal-body">
                          <form role="form" id="myform">
                              <div class="form-group">
                                <label for="exampleInputEmail1">Teamname</label>
                                <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Enter Your Teamname" name="teamname">
                                <hr>
                                <p class="text-center"> OR </p>
                                <label for="example">Team ID </label>
                                <input type="text" name="teamid" class="form-control" id="example" placeholder="enter Your Team Id">
                                <input type="hidden" name="eventid" value="{{ event.id }}" />
                              </div>
                              <button type="submit" class="btn btn-default">Submit</button>
                            </form>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->


              <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
                <li class=""><a href="#reg" data-toggle="tab">Registered &nbsp;<span class="badge pull-right"> 42</span></a></li>
              </ul>

              <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade active in" id="home">
                  <br/>
                  <h4>Description:</h4>
                  <p>{{ event.description }}</p>
                  <h4> Venue: </h4>
                  <p><span class="glyphicon glyphicon-map-marker"></span>  {{ event.venue }} </p>
                  <h4> Time : </h4>
                  <p><span class="glyphicon glyphicon-calendar"></span> {{ event.start_time }} </p>
                  <h4> Duration : </h4>
                  <p><span class="glyphicon glyphicon-time"></span> {{ event.duration }} </p>
                  <h4> Elligibilty : </h4>
                  <button type="button" class="btn btn-default btn-sm">
                    <span class="glyphicon glyphicon-star"></span> Year Elligibility: {{ event.year_elligible }}
                  </button>
                  <button type="button" class="btn btn-default btn-sm">
                    <span class="glyphicon glyphicon-star"></span> Dept Elligibility: {{ event.dept_elligible }}
                  </button>
                  <button type="button" class="btn btn-default btn-sm">
                    <span class="glyphicon glyphicon-star"></span> Hostel Elligibility: {{ event.hostel_elligible }}
                  </button>
                     {% if type == "concert" %}

                        <h4> Concert By: </h4>
                          <p> {{ concert.concertby }} </p>

                     {% elif type == "workshop" %}
                        <h4> Workshop By: </h4>
                        <p> {{ workshop.conductedby}} </h4>
                        <h4> Field of Workshop: </h4>
                        <p> %NAME% </p>
                     {% elif type == "lecture" %}
                      <h4> Lecture By: </h4>
                      <p> {{ workshop.field }} </p>
                   
                     {% elif type == "competition" %}
                      <h4>Dead line to register </h4>
                      <p><span class="glyphicon glyphicon-calendar"></span> {{ competition.deadline }} </span></p>
                    {% elif type == "team" %}
                      <h4>Dead line to register </h4>
                      <p><spanclass="glyphicon glyphicon-calendar"></span> {{ team.deadline }} </span></p>
                      <h4> Max Team Size </h4>
                      <p>{{ team.teamsize }}
                    {% endif %}
                 <h4><span class="label label-primary">%Event Type%</span></h4>

                </div>
                <div class="tab-pane fade" id="reg">
                  <br/>
                  <p></p>
                </div>
            </div>


        </div>
      </div>
    </div>
  </div>
      <footer>
        <div class="row">
          <div class="col-lg-12">
            <hr>
            <p style="text-align:center">Copyright &copy; Company 2013</p>
            <p style="text-align:center"> Contact us </p>
          </div>
        </div>
      </footer>
    </div>
<script type="text/javascript">
$(document).ready(function() {
    $("#myform").submit(function() {

        $.ajax(
                {
                    type: 'POST',
                    url: './register',
                    data: {}, //your form datas to post          
                    success: function(response)
                    {
                        alert(response);

                    },
                    error: function()
                    {
                        alert("Failure");
                    }
                });

    });
});

</script>